<!DOCTYPE html>âŠ
<html lang="pt">âŠ
<head>âŠ
  <meta charset="UTF-8" />âŠ
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>âŠ
  <title>Reserva do Prato</title>âŠ
  <style>âŠ
    body {âŠ
      font-family: Arial, sans-serif;âŠ
      background-color: #f2f2f2;âŠ
      margin: 0;âŠ
    }âŠ
âŠ
    header {âŠ
      background: #222;âŠ
      padding: 20px;âŠ
      display: flex;âŠ
      align-items: center;âŠ
    }âŠ
âŠ
    .logo img {âŠ
      height: 60px;âŠ
    }âŠ
.container {âŠ
      max-width: 500px;âŠ
      margin: 40px auto;âŠ
      background: white;âŠ
      padding: 30px;âŠ
      border-radius: 10px;âŠ
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);âŠ
      text-align: center;âŠ
    }âŠ
âŠ
    .company-name {âŠ
      margin: 10px 0;âŠ
      font-weight: bold;âŠ
    }âŠ
âŠ
âŠ
    input[type="text"], input[type="password"], input[type="date"], input[type="file"], button {âŠ
      width: 100%;âŠ
      padding: 10px;âŠ
      margin: 10px 0;âŠ
      font-size: 16px;âŠ
      border-radius: 5px;âŠ
      border: 1px solid #ccc;âŠ
    }âŠ
âŠ
    button {âŠ
      background-color: #222;âŠ
      color: white;âŠ
      border: none;âŠ
      cursor: pointer;âŠ
    }âŠ
âŠ
    button:hover {âŠ
      background-color: #444;âŠ
    }âŠ
âŠ
    #prato, #login, #opcoesAdmin, #editor, #todosPratos {âŠ
      display: none;âŠ
      margin-top: 30px;âŠ
    }âŠ
âŠ
    img.prato-img {âŠ
      width: 300px;âŠ
      border-radius: 10px;âŠ
    }âŠ
âŠ
    ul {âŠ
      list-style: none;âŠ
      padding: 0;âŠ
    }âŠ
âŠ
    ul li {âŠ
      margin-bottom: 20px;âŠ
    }âŠ
âŠ
  .footer-text {âŠ
  text-align: center; /* Centraliza o conteÃºdo */âŠ
  margin-top: 50px;âŠ
  font-size: 14px;âŠ
  color: #888;âŠ
}âŠ
  .styled-select[multiple] {âŠ
    height: auto;âŠ
    min-height: 100px; /* Define uma altura mÃ­nima */âŠ
    overflow-y: auto; /* Adiciona rolagem se necessÃ¡rio */âŠ
    width: 100%; /* Garante que a largura seja consistente */âŠ
    padding: 10px;âŠ
    font-size: 16px;âŠ
    border-radius: 5px;âŠ
    border: 1px solid #ccc;âŠ
    background-color: #fff;âŠ
  }âŠ
    .styled-select {âŠ
  width: 100%;âŠ
  padding: 10px;âŠ
  font-size: 16px;âŠ
  border-radius: 5px;âŠ
  border: 1px solid #ccc;âŠ
  background-color: #fff;âŠ
  appearance: none; /* Remove o estilo padrÃ£o do navegador */âŠ
  -webkit-appearance: none;âŠ
  -moz-appearance: none;âŠ
  background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg xmlns%3D%22http%3A//www.w3.org/2000/svg%22 viewBox%3D%220 0 4 5%22%3E%3Cpath fill%3D%22%23ccc%22 d%3D%22M2 0L0 2h4z%22/%3E%3C/svg%3E');âŠ
  background-repeat: no-repeat;âŠ
  background-position: right 10px center;âŠ
  background-size: 10px;âŠ
}âŠ
âŠ
.styled-select:focus {âŠ
  border-color: #444;âŠ
  outline: none;âŠ
}âŠ
  #selecaoDia {âŠ
    max-width: 400px;âŠ
    margin: 20px auto;âŠ
    padding: 20px;âŠ
    background: #fff;âŠ
    border-radius: 10px;âŠ
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);âŠ
    text-align: center;âŠ
  }âŠ
âŠ
  #selecaoDia h3 {âŠ
    margin-bottom: 20px;âŠ
    font-size: 20px;âŠ
    color: #333;âŠ
  }âŠ
âŠ
  #selecaoDia label {âŠ
    display: block;âŠ
    margin-bottom: 10px;âŠ
    font-size: 16px;âŠ
    color: #555;âŠ
  }âŠ
âŠ
  #selecaoDia select {âŠ
    width: 100%;âŠ
    padding: 10px;âŠ
    font-size: 16px;âŠ
    border-radius: 5px;âŠ
    border: 1px solid #ccc;âŠ
    margin-bottom: 20px;âŠ
  }âŠ
âŠ
  #selecaoDia button {âŠ
    width: 100%;âŠ
    padding: 10px;âŠ
    font-size: 16px;âŠ
    border-radius: 5px;âŠ
    border: none;âŠ
    background-color: #222;âŠ
    color: white;âŠ
    cursor: pointer;âŠ
    margin-bottom: 10px;âŠ
  }âŠ
âŠ
  #selecaoDia button:hover {âŠ
    background-color: #444;âŠ
  }âŠ
  ul li {âŠ
    display: flex;âŠ
    flex-direction: column; /* Alinha os elementos verticalmente */âŠ
    align-items: center; /* Centraliza os elementos */âŠ
    margin-bottom: 20px;âŠ
    border: 1px solid #ccc;âŠ
    border-radius: 10px;âŠ
    padding: 15px;âŠ
    background-color: #f9f9f9;âŠ
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);âŠ
  }âŠ
âŠ
  ul li img {âŠ
    width: 150px; /* Define um tamanho adequado para a imagem */âŠ
    height: auto;âŠ
    border-radius: 10px;âŠ
    margin-bottom: 10px;âŠ
  }âŠ
âŠ
  ul li span {âŠ
    font-size: 18px;âŠ
    font-weight: bold;âŠ
    margin-bottom: 10px;âŠ
    text-align: center;âŠ
  }âŠ
âŠ
  ul li button {âŠ
    width: 100px;âŠ
    padding: 8px;âŠ
    margin: 5px;âŠ
    font-size: 14px;âŠ
    border: none;âŠ
    border-radius: 5px;âŠ
    cursor: pointer;âŠ
    background-color: #222;âŠ
    color: white;âŠ
  }âŠ
âŠ
  ul li button:hover {âŠ
    background-color: #444;âŠ
 âŠ
  }âŠ
   .checkbox-container {âŠ
    display: flex;âŠ
    flex-direction: column;âŠ
    gap: 10px; /* EspaÃ§amento entre os itens */âŠ
    margin-top: 10px;âŠ
  }âŠ
âŠ
  .custom-checkbox {âŠ
    display: flex;âŠ
    align-items: center;âŠ
    gap: 10px; /* EspaÃ§amento entre a checkbox e o texto */âŠ
    font-size: 16px;âŠ
    color: #555;âŠ
    cursor: pointer;âŠ
  }âŠ
âŠ
  .custom-checkbox input[type="checkbox"] {âŠ
    appearance: none; /* Remove o estilo padrÃ£o */âŠ
    width: 20px;âŠ
    height: 20px;âŠ
    border: 2px solid #ccc;âŠ
    border-radius: 5px; /* Torna as bordas arredondadas */âŠ
    background-color: #fff;âŠ
    cursor: pointer;âŠ
    transition: all 0.3s ease;âŠ
  }âŠ
âŠ
  .custom-checkbox input[type="checkbox"]:checked {âŠ
    background-color: #222;âŠ
    border-color: #222;âŠ
  }âŠ
âŠ
  .custom-checkbox input[type="checkbox"]:checked::before {âŠ
    content: "âœ”";âŠ
    display: block;âŠ
    text-align: center;âŠ
    color: white;âŠ
    font-size: 14px;âŠ
    line-height: 20px;âŠ
  }âŠ
âŠ
  .custom-checkbox span {âŠ
    user-select: none; /* Impede a seleÃ§Ã£o do texto ao clicar */âŠ
  }âŠ
  #prato {âŠ
   display: flex; /* Exibe as tabelas lado a lado */âŠ
    flex-wrap: nowrap; /* Impede que as tabelas quebrem linha */âŠ
    gap: 20px; /* EspaÃ§amento entre as tabelas */âŠ
    justify-content: flex-start; /* Alinha as tabelas Ã  esquerda */âŠ
    overflow-x: auto; /* Adiciona rolagem horizontal */âŠ
    padding: 5px 10px; /* Reduz o espaÃ§amento interno */âŠ
    margin-bottom: 10px; /* Reduz o espaÃ§amento externo inferior */âŠ
    cursor: grab; /* Adiciona um cursor de "mÃ£o" para indicar que Ã© arrastÃ¡vel */âŠ
  }âŠ
âŠ
  #prato h3 {âŠ
    text-align: center;âŠ
    margin-bottom: 10px;âŠ
    font-size: 18px;âŠ
    color: #333;âŠ
  }âŠ
#prato:active {âŠ
    cursor: grabbing; /* Muda o cursor ao arrastar */âŠ
  }âŠ
âŠ
  #prato::-webkit-scrollbar {âŠ
    height: 8px; /* Altura da barra de rolagem */âŠ
  }âŠ
âŠ
  #prato::-webkit-scrollbar-thumb {âŠ
    background: #ccc; /* Cor do "polegar" da barra de rolagem */âŠ
    border-radius: 4px;âŠ
  }âŠ
âŠ
  #prato::-webkit-scrollbar-track {âŠ
    background: #f2f2f2; /* Cor do fundo da barra de rolagem */âŠ
  }âŠ
  .prato-item {âŠ
    position: relative;âŠ
    display: flex;âŠ
    flex-direction: column;âŠ
    align-items: center;âŠ
    border: 1px solid #ccc;âŠ
    border-radius: 10px;âŠ
    padding: 10px;âŠ
    background-color: #f9f9f9;âŠ
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);âŠ
    margin-bottom: 10px;âŠ
    cursor: pointer;âŠ
  }âŠ
âŠ
  .prato-item img {âŠ
    width: 150px;âŠ
    height: auto;âŠ
    border-radius: 10px;âŠ
    margin-bottom: 10px;âŠ
  }âŠ
âŠ
  .prato-item.selected::after {âŠ
    content: "âœ”";âŠ
    position: absolute;âŠ
    top: 10px;âŠ
    right: 10px;âŠ
    background-color: #222;âŠ
    color: white;âŠ
    font-size: 18px;âŠ
    width: 30px;âŠ
    height: 30px;âŠ
    border-radius: 50%;âŠ
    display: flex;âŠ
    align-items: center;âŠ
    justify-content: center;âŠ
  }âŠ
âŠ
  .prato-item p {âŠ
    font-size: 14px;âŠ
    color: #555;âŠ
    text-align: center;âŠ
  }âŠ
.prato-item.selected {âŠ
  border: 2px solid #222;âŠ
  background-color: #e0e0e0;âŠ
}âŠ
#prato {âŠ
  position: relative; /* Para posicionar o botÃ£o dentro do contÃªiner */âŠ
  padding-bottom: 60px; /* EspaÃ§o para o botÃ£o */âŠ
}âŠ
âŠ
.btn-container {âŠ
  width: 100%;âŠ
  margin-top: 30px;âŠ
  display: flex;âŠ
  flex-direction: column;âŠ
  gap: 10px;âŠ
  align-items: center;âŠ
}âŠ
.btn-container button {âŠ
  width: 100%;âŠ
  padding: 10px;âŠ
  font-size: 16px;âŠ
  border-radius: 5px;âŠ
  border: none;âŠ
  background-color: #222;âŠ
  color: white;âŠ
  cursor: pointer;âŠ
}âŠ
âŠ
.btn-container button:hover {âŠ
  background-color: #444;âŠ
}âŠ
.container {âŠ
  margin: 40px auto;âŠ
  background: white;âŠ
  padding: 48px;âŠ
  border-radius: 10px;âŠ
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);âŠ
  text-align: center;âŠ
  display: flex;âŠ
  flex-direction: column;âŠ
  min-height: 80vh;âŠ
  position: relative;âŠ
  /* max-width removido daqui */âŠ
}âŠ
âŠ
.container-grande {âŠ
  max-width: 1000px;âŠ
}âŠ
âŠ
#prato {âŠ
  display: flex;âŠ
  flex-direction: row; /* Lado a lado */âŠ
  gap: 20px;âŠ
  justify-content: flex-start;âŠ
  align-items: flex-start;âŠ
  overflow-x: auto;âŠ
  margin-bottom: 0;âŠ
  padding-bottom: 0;âŠ
  position: relative;âŠ
  width: 100%;âŠ
  min-height: 200px;âŠ
}âŠ
âŠ
.btn-container {âŠ
  width: 100%;âŠ
  margin-top: 30px;âŠ
  display: flex;âŠ
  flex-direction: column;âŠ
  gap: 10px;âŠ
  align-items: center;âŠ
}âŠ
#botoesReserva {âŠ
  display: flex;âŠ
  flex-direction: row;âŠ
  gap: 20px;âŠ
  position: static; /* Remove o fixed */âŠ
  width: auto;âŠ
  background: none;âŠ
  justify-content: center;âŠ
  align-items: center;âŠ
  margin: 30px 0 0 0;âŠ
}âŠ
âŠ
#botoesReserva button {âŠ
  width: auto;âŠ
  min-width: 140px;âŠ
  padding: 10px 20px;âŠ
  font-size: 16px;âŠ
}âŠ
âŠ
#btnMenu {âŠ
  position: static !important;âŠ
  margin: 20px auto 0 auto;âŠ
  display: block;âŠ
}âŠ
#btnAdmin {âŠ
    position: fixed;âŠ
    bottom: 20px;âŠ
    left: 50%;âŠ
    transform: translateX(-50%);âŠ
    width: 90%;âŠ
    max-width: 400px;âŠ
    z-index: 100;âŠ
}âŠ
</style>âŠ
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">âŠ
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>âŠ
</head>âŠ
<body>âŠ
âŠ
<header>âŠ
  <div class="logo">âŠ
    <img src="https://www.tudopararegistar.pt/TRSOFT.png?v=84vxjc8z7408oxt" alt="Logo TR soft">âŠ
  </div>âŠ
</header>âŠ
âŠ
<div class="container">âŠ
  <h2 id="titulo">Reserva dos Pratos </h2>âŠ
âŠ
<div class="formulario">âŠ
  <label for="nome">O seu nome:</label>âŠ
  <input type="text" id="nome" required>âŠ
   âŠ
<label for="diaSemanaCliente">Escolha os dias que pretende ver os pratos:</label>âŠ
<div id="diaSemanaCliente" class="checkbox-container">âŠ
<label class="custom-checkbox">âŠ
  <input type="checkbox" value="Segunda-feira"> Segunda-feiraâŠ
</label>âŠ
<label class="custom-checkbox">âŠ
  <input type="checkbox" value="TerÃ§a-feira"> TerÃ§a-feiraâŠ
</label>âŠ
<label class="custom-checkbox">âŠ
  <input type="checkbox" value="Quarta-feira"> Quarta-feiraâŠ
</label>âŠ
<label class="custom-checkbox">âŠ
  <input type="checkbox" value="Quinta-feira"> Quinta-feiraâŠ
</label>âŠ
<label class="custom-checkbox">âŠ
  <input type="checkbox" value="Sexta-feira"> Sexta-feiraâŠ
</label>âŠ
<label class="custom-checkbox">âŠ
  <input type="checkbox" value="SÃ¡bado"> SÃ¡badoâŠ
</label>âŠ
</div>âŠ
<div id="containerPratos" style="display:none;"></div>âŠ
<div id="verPratosContainer" style="display:none;"></div>âŠ
<button id="btnVer">Ver Prato</button>âŠ
<div id="grid-container" style="display: none;" class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"></div>âŠ
âŠ
</div>âŠ
âŠ
<div id="prato" style="display:none;">âŠ
  <h2>Selecione os Pratos</h2>âŠ
  <div id="listaPratos" class="checkbox-container"></div>âŠâŠ
</div>âŠ
âŠ
<div id="telaPratos" style="display:none; flex-direction:column; min-height:80vh;">âŠ
  <h3>Selecione os Pratos</h3>âŠ
  <div id="listaPratosTela" style="display:flex; flex-wrap:wrap; gap:20px; justify-content:center;"></div>âŠâŠ
  <div id="botoesReserva" style="display:flex; flex-direction:row; gap:20px; justify-content:center; margin-top:30px;">âŠ
    <button onclick="salvarPratosSelecionados()">Concluir Reserva</button>âŠ
  <button type="button" onclick="voltarMenu()">Voltar</button>âŠ
  </div>âŠ
</div>âŠ
<!-- BotÃ£o para o administrador -->âŠ
  <button id="btnMenu" onclick="mostrarLogin()">AdministraÃ§Ã£o</button>âŠ
âŠ
 <div id="login">âŠ
  <h3>Login de Administrador</h3>âŠ
  <input type="text" id="user" placeholder="Utilizador">âŠ
  <input type="password" id="pass" placeholder="Palavra-passe">âŠ
  <button onclick="login()">Entrar</button>âŠ
  <button onclick="voltarMenu()">Voltar</button>âŠ
</div>âŠ
  âŠ
 <div id="opcoesAdmin">âŠ
  <button onclick="editarPratos()">Editar Pratos</button>âŠ
  <button onclick="mostrarTodosPratos()">Ver Todos os Pratos</button>âŠ
  <button onclick="voltarMenu()">Voltar ao inÃ­cio</button>âŠ
</div>âŠ
âŠ
 <div id="editor" style="display:none;">âŠ
 <div id="listaPratosEditor">âŠ
    <div class="entrada-prato">âŠ
      <label for="novaImagem">Imagem do prato:</label>âŠ
      <input type="file" class="novaImagem" accept="image/*">âŠ
âŠ
      <label for="novoNome">Nome do prato:</label>âŠ
      <input type="text" class="novoNome" placeholder="Nome do prato">âŠ
âŠ
<label for="diaSemanaAdmin">Escolha o dia:</label>âŠ
<select id="diaSemanaAdmin" class="styled-select">âŠ
  <option value="1">Segunda-feira</option>âŠ
  <option value="2">TerÃ§a-feira</option>âŠ
  <option value="3">Quarta-feira</option>âŠ
  <option value="4">Quinta-feira</option>âŠ
  <option value="5">Sexta-feira</option>âŠ
   <option value="6">SÃ¡bado</option>âŠ
</select>âŠ
    </div>âŠ
    </div>âŠ
    <button onclick="guardarPrato()">Guardar</button>âŠ
    <button onclick="mostrarAdmin()">Voltar Ã  tela de admin</button> <!-- BotÃ£o adicionado -->âŠ
  </div>âŠ
  âŠ
<div id="todosPratos">âŠ
  <h3>Ver Todos os Pratos</h3>âŠ
  <label for="diaSemanaFiltro">Escolha o dia:</label>âŠ
  <select id="diaSemanaFiltro" class="styled-select">âŠ
    <option value="1">Segunda-feira</option>âŠ
    <option value="2">TerÃ§a-feira</option>âŠ
    <option value="3">Quarta-feira</option>âŠ
    <option value="4">Quinta-feira</option>âŠ
    <option value="5">Sexta-feira</option>âŠ
     <option value="6">SÃ¡bado</option>âŠ
  </select>âŠ
  <button onclick="verTodosOsPratos()">Alterar Pratos</button>âŠ
  <ul id="pratos-list"></ul>âŠ
  <button onclick="voltarMenu()">Voltar</button>âŠ
</div>âŠ
<div id="imagens-confirmacao"></div>âŠ
âŠ
  <div class="footer-text">âŠ
    <img src="https://www.trsoft.pt/TRREST_20novo00.png?v=30c3kwurp0v9oh" alt="TR Rest Logo" style="height: 40px;">âŠ
  </div>âŠ
</div>âŠ
<script src="js/js/utils.js"></script>âŠ
<script>âŠ
   let pratosGlobais = [];âŠ
   let pratosSelecionados = [];âŠ
 window.addEventListener("load", () => {âŠ
  document.getElementById("grid-container").style.display = "none";âŠ
});âŠ
const scriptURL = "https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec";âŠ
âŠ
âŠ
 function verificarDiasEChamar() {âŠ
  const diasSelecionados = [];âŠ
  document.querySelectorAll('#diaSemanaCliente input[type=checkbox]:checked').forEach(cb => diasSelecionados.push(cb.value));âŠ
  mostrarPratosParaCliente(diasSelecionados);âŠ
}âŠ
âŠ
âŠ
function mostrarVisualizacaoPrato(prato) {âŠ
  const container = document.getElementById('containerPratos');âŠ
  container.innerHTML = `âŠ
    <div class="visualizacao-unica" style="text-align: center; padding: 20px;">âŠ
      <h2 style="font-size: 24px; margin-bottom: 10px;">${prato.nome}</h2>âŠ
      <img src="${prato.imagem}" alt="${prato.nome}" style="max-width: 300px; border-radius: 10px; margin-bottom: 20px;" />âŠ
      <div class="btn-container" style="display: flex; justify-content: center; gap: 10px;">âŠ
        <button onclick="salvarPratosSelecionados()" style="padding: 10px 20px;">Concluir Reserva</button>âŠ
        <button onclick="voltarParaListaPratos()" style="padding: 10px 20px;">Voltar</button>âŠ
      </div>âŠ
    </div>âŠ
  `;âŠ
}âŠ
function voltarParaListaPratos() {âŠ
  verPratosPublicos(); // ou a funÃ§Ã£o que usas para mostrar os pratos de novoâŠ
}âŠ
âŠ
// FunÃ§Ã£o que vai receber os dados do Google Apps Script via JSONPâŠ
function receberDadosSheets(data) {âŠ
  let arrayPratos = [];âŠ
  for (const dia in data) {âŠ
    data[dia].forEach(prato => {âŠ
      arrayPratos.push({âŠ
        diaSemana: converterDia(dia),  // Adicione isso para manter consistÃªnciaâŠ
        nome: prato.prato,âŠ
        imagem: prato.imagemâŠ
      });âŠ
    });âŠ
  }âŠ
âŠ
  pratosGlobais = arrayPratos;âŠ
localStorage.setItem('pratos', JSON.stringify(arrayPratos));âŠ
âŠ
}âŠ
âŠ
âŠ
function verPratosFiltradosPorDias(diasSelecionados) {âŠ
  // Esconde o formulÃ¡rio inicialâŠ
  document.querySelector('.formulario').style.display = 'none';âŠ
âŠ
  // Mostra o container dos pratosâŠ
  const container = document.getElementById('containerPratos');âŠ
  container.innerHTML = '';âŠ
  container.style.display = 'block';âŠ
âŠ
  // ... (filtra e renderiza os pratos como jÃ¡ faz) ...âŠ
âŠ
  // Adiciona os botÃµes no fundo do containerâŠ
  const botoesRodape = document.createElement('div');âŠ
  botoesRodape.className = 'btn-container';âŠ
  botoesRodape.style.position = 'fixed';âŠ
  botoesRodape.style.bottom = '30px';âŠ
  botoesRodape.style.left = '0';âŠ
  botoesRodape.style.width = '100%';âŠ
  botoesRodape.style.background = 'white';âŠ
  botoesRodape.style.display = 'flex';âŠ
  botoesRodape.style.justifyContent = 'center';âŠ
  botoesRodape.style.gap = '20px';âŠ
  botoesRodape.style.zIndex = '100';âŠ
âŠ
  const btnConcluir = document.createElement('button');âŠ
  btnConcluir.textContent = 'Concluir Reserva';âŠ
  btnConcluir.onclick = salvarPratosSelecionados;âŠ
âŠ
  const btnVoltar = document.createElement('button');âŠ
  btnVoltar.textContent = 'Voltar';âŠ
  btnVoltar.onclick = () => {âŠ
    container.style.display = 'none';âŠ
    document.querySelector('.formulario').style.display = 'block';âŠ
  };âŠ
âŠ
  botoesRodape.appendChild(btnVoltar);âŠ
  botoesRodape.appendChild(btnConcluir);âŠ
âŠ
  document.body.appendChild(botoesRodape);âŠ
âŠ
  // Remover os botÃµes quando voltarâŠ
  btnVoltar.onclick = () => {âŠ
    container.style.display = 'none';âŠ
    document.querySelector('.formulario').style.display = 'block';âŠ
    botoesRodape.remove();âŠ
  };âŠ
  btnConcluir.onclick = () => {âŠ
    salvarPratosSelecionados();âŠ
    botoesRodape.remove();âŠ
  };âŠ
âŠ
âŠ
 âŠ
}âŠ
window.addEventListener("DOMContentLoaded", () => {âŠ
  const btnVer = document.getElementById("btnVer");âŠ
  if (btnVer) {âŠ
    btnVer.addEventListener("click", () => {âŠ
      const nome = document.getElementById("nome").value.trim();âŠ
      const diasSelecionados = Array.from(âŠ
        document.querySelectorAll("#diaSemanaCliente input:checked")âŠ
      ).map(input => input.value);âŠ
      if (!nome || diasSelecionados.length === 0) {âŠ
        alert("Por favor, preencha seu nome e selecione pelo menos um dia.");âŠ
        return;âŠ
      }âŠ
      window.receberPratosParaCliente = function (data) {âŠ
        const arrayPratos = [];âŠ
        for (const dia in data) {âŠ
          data[dia].forEach(prato => {âŠ
            arrayPratos.push({âŠ
              nome: prato.prato || prato.nome,âŠ
              diaSemana: prato.diaSemana || dia,âŠ
              imagem: prato.imagem,âŠ
              oculto: prato.oculto,âŠ
            });âŠ
          });âŠ
        }âŠ
        mostrarTelaSelecaoPratos(arrayPratos, diasSelecionados);âŠ
        delete window.receberPratosParaCliente;âŠ
      };âŠ
      const script = document.createElement("script");âŠ
      script.src = "https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec?modo=pratos&callback=receberPratosParaCliente";âŠ
      script.onerror = () => {
        fetch('proxy.php', {
          method: 'POST',
          body: JSON.stringify({ modo: 'pratos' })
        })
          .then(resp => {
            if (!resp.ok) throw new Error('Network error');
            return resp.json();
          })
          .then(dados => {
            const arrayPratos = [];
            for (const dia in dados) {
              dados[dia].forEach(prato => {
                arrayPratos.push({
                  nome: prato.prato || prato.nome,
                  diaSemana: prato.diaSemana || dia,
                  imagem: prato.imagem,
                  oculto: prato.oculto,
                });
              });
            }
            mostrarTelaSelecaoPratos(arrayPratos, diasSelecionados);
          })
          .catch(() => {
            const pratosLocal = JSON.parse(localStorage.getItem('pratos')) || [];
            mostrarTelaSelecaoPratos(pratosLocal, diasSelecionados);
            alert('NÃ£o foi possÃ­vel carregar os pratos da internet; mostrando dados locais.');
          });
      };

âŠ
      document.body.appendChild(script);âŠ
    });âŠ
  }âŠ
});âŠ
âŠ
âŠ
âŠ
function mostrarTelaSelecaoPratos(pratos, diasSelecionados) {âŠ
  document.querySelector('.container').classList.add('container-grande');âŠ
  const telaPratos = document.getElementById('telaPratos');âŠ
  telaPratos.innerHTML = '';âŠ
  telaPratos.style.display = 'flex';âŠ
  telaPratos.style.flexDirection = 'column';âŠ
  telaPratos.style.alignItems = 'center';âŠ
âŠ
  let pratosSelecionadosArr = [];âŠ
âŠ
  // Agrupa os pratos por diaâŠ
  const pratosPorDia = {};âŠ
diasSelecionados.forEach(dia => {âŠ
    pratosPorDia[dia] = pratos.filter(prato => {âŠ
      const mesmoDia = prato.diaSemana == dia || getDiaSemanaTexto(prato.diaSemana) == dia;âŠ
      const estaVisivel = !(âŠ
        String(prato.oculto).toLowerCase() === "ocultado" ||âŠ
        String(prato.oculto).toUpperCase() === "TRUE" ||âŠ
        prato.oculto === trueâŠ
      );âŠ
      return mesmoDia && estaVisivel;âŠ
    });âŠ
  });âŠ
âŠ
  const maxPratos = Math.max(...Object.values(pratosPorDia).map(lista => lista.length));âŠ
âŠ
  const grid = document.createElement('div');âŠ
  grid.style.display = 'grid';âŠ
  grid.style.gridTemplateColumns = `repeat(${diasSelecionados.length}, 180px)`;âŠ
  grid.style.gap = '32px';âŠ
  grid.style.justifyContent = 'center';âŠ
  grid.style.width = '100%';âŠ
âŠ
  diasSelecionados.forEach(dia => {âŠ
    const th = document.createElement('div');âŠ
    th.textContent = dia;âŠ
    th.style.fontWeight = 'bold';âŠ
    th.style.textAlign = 'center';âŠ
    th.style.marginBottom = '8px';âŠ
    grid.appendChild(th);âŠ
  });âŠ
âŠ
  for (let i = 0; i < maxPratos; i++) {âŠ
    diasSelecionados.forEach(dia => {âŠ
      const listaDia = pratosPorDia[dia];âŠ
      const prato = listaDia[i];âŠ
      const cell = document.createElement('div');âŠ
      cell.style.width = '180px';âŠ
      cell.style.minHeight = '180px';âŠ
      cell.style.display = 'flex';âŠ
      cell.style.flexDirection = 'column';âŠ
      cell.style.alignItems = 'center';âŠ
      cell.style.justifyContent = 'center';âŠ
âŠ
      if (prato) {âŠ
        cell.className = 'prato-item';âŠ
        cell.style.border = '1px solid #eee';âŠ
        cell.style.borderRadius = '8px';âŠ
        cell.style.padding = '12px';âŠ
        cell.style.background = '#fafafa';âŠ
        cell.style.transition = '0.2s';âŠ
cell.innerHTML = `âŠ
          <img src="${prato.imagem || 'https://dummyimage.com/150x150/cccccc/000000&text=Sem+Imagem'}"âŠ
               alt="Imagem do Prato" style="max-width:120px; border-radius:8px;">âŠ
          <p style="margin: 8px 0 0 0; font-weight: bold;">${prato.nome}</p>âŠ
        `;âŠ
        cell.onclick = () => {âŠ
          if (cell.classList.contains('selected')) {âŠ
            cell.classList.remove('selected');âŠ
            pratosSelecionadosArr = pratosSelecionadosArr.filter(p => p !== prato);âŠ
          } else {âŠ
            cell.classList.add('selected');âŠ
            pratosSelecionadosArr.push(prato);âŠ
          }âŠ
        };âŠ
       âŠ
      } else {âŠ
        cell.style.background = 'transparent';âŠ
        cell.style.border = 'none';âŠ
        cell.innerHTML = '&nbsp;';âŠ
      }âŠ
âŠ
      grid.appendChild(cell);âŠ
    });âŠ
  }âŠ
âŠ
  telaPratos.appendChild(grid);âŠ
âŠ
  if (maxPratos === 0) {âŠ
    telaPratos.innerHTML += '<p style="color:#888;">Nenhum prato disponÃ­vel para os dias selecionados.</p>';âŠ
  }âŠ
âŠ
  const botoesDiv = document.createElement('div');âŠ
  botoesDiv.style.marginTop = '32px';âŠ
  botoesDiv.style.display = 'flex';âŠ
  botoesDiv.style.gap = '16px';âŠ
  botoesDiv.style.justifyContent = 'center';âŠ
âŠ
  const btnConcluir = document.createElement('button');âŠ
  btnConcluir.textContent = 'Concluir Reserva';âŠ
  btnConcluir.style.padding = '10px 28px';âŠ
  btnConcluir.style.fontSize = '1rem';âŠ
  btnConcluir.style.fontWeight = 'bold';âŠ
  btnConcluir.style.borderRadius = '6px';âŠ
  btnConcluir.style.background = '#222';âŠ
  btnConcluir.style.color = '#fff';âŠ
  btnConcluir.style.border = 'none';âŠ
  btnConcluir.style.cursor = 'pointer';âŠ
âŠ
  btnConcluir.onclick = () => {âŠ
    const nomeCliente = document.getElementById('nome').value.trim();âŠ
    enviarReservaParaSheets(nomeCliente, pratosSelecionadosArr);âŠ
  };âŠ
âŠ
  const btnVoltar = document.createElement('button');âŠ
  btnVoltar.textContent = 'Voltar';âŠ
  btnVoltar.style.padding = '10px 28px';âŠ
  btnVoltar.style.fontSize = '1rem';âŠ
  btnVoltar.style.fontWeight = 'bold';âŠ
  btnVoltar.style.borderRadius = '6px';âŠ
  btnVoltar.style.background = '#555';âŠ
  btnVoltar.style.color = '#fff';âŠ
  btnVoltar.style.border = 'none';âŠ
  btnVoltar.style.cursor = 'pointer';âŠ
âŠ
  btnVoltar.onclick = () => {âŠ
    telaPratos.style.display = 'none';âŠ
    document.querySelector('.formulario').style.display = 'block';âŠ
    document.querySelector('.container').classList.remove('container-grande');âŠ
  };âŠ
âŠ
  botoesDiv.appendChild(btnConcluir);âŠ
  botoesDiv.appendChild(btnVoltar);âŠ
âŠ
  telaPratos.appendChild(botoesDiv);âŠ
âŠ
  document.querySelector('.formulario').style.display = 'none';âŠ
}âŠ
âŠ
âŠ
function mostrarTodosPratos() {âŠ
      document.getElementById('opcoesAdmin').style.display = 'none';âŠ
      document.getElementById('todosPratos').style.display = 'block';âŠ
    }âŠ
  âŠ
    function mostrarAdmin() {âŠ
  // Ocultar todas as seÃ§ÃµesâŠ
  document.getElementById('editor').style.display = 'none';âŠ
  document.getElementById('todosPratos').style.display = 'none';âŠ
  document.getElementById('prato').style.display = 'none';âŠ
  document.querySelector(".formulario").style.display = 'none';âŠ
  document.getElementById('login').style.display = 'none';âŠ
âŠ
  // Mostrar a tela de administraÃ§Ã£oâŠ
  document.getElementById('opcoesAdmin').style.display = 'block';âŠ
}âŠ
âŠ
âŠ
console.log("ğŸ“¦ Pratos disponÃ­veis:", pratosGlobais);âŠ
âŠ
function carregarPratosRegistrados() {âŠ
  const script = document.createElement('script');âŠ
  script.src = 'https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec?modo=pratos&callback=receberDadosSheets';âŠ
  document.body.appendChild(script);âŠ
}âŠ
window.addEventListener("load", () => {âŠ
  carregarPratosRegistrados();âŠ
  // exibirPratos();âŠ
});âŠ
function submeter() {âŠ
  const nome = document.getElementById('nome').value.trim();âŠ
  const diasSemana = Array.from(document.querySelectorAll('#diaSemanaCliente input:checked')).map(input => parseInt(input.value));âŠ
âŠ
  if (!nome || diasSemana.length === 0) {âŠ
    alert("Por favor preencha todos os campos.");âŠ
    return;âŠ
  }âŠ
âŠ
  // Define uma funÃ§Ã£o callback temporÃ¡ria para capturar os dadosâŠ
  window.receberPratosParaSubmeter = function(data) {âŠ
    const arrayPratos = [];âŠ
âŠ
    for (const dia in data) {âŠ
      data[dia].forEach(prato => {âŠ
        arrayPratos.push({âŠ
          nome: prato.prato,âŠ
          imagem: prato.imagem,âŠ
          diaSemana: converterDia(dia)âŠ
        });âŠ
      });âŠ
    }âŠ
âŠ
    mostrarPratosParaCliente(arrayPratos, diasSemana);âŠ
âŠ
    // Limpa a callback para evitar conflitos futurosâŠ
    delete window.receberPratosParaSubmeter;âŠ
  };âŠ
âŠ
  // Carrega os dados usando JSONPâŠ
  const script = document.createElement('script');âŠ
  script.src = 'https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec?modo=pratos&callback=receberPratosParaSubmeter';âŠ
  document.body.appendChild(script);âŠ
}âŠ
function converterDia(diaString) {âŠ
  const dias = {âŠ
    "Segunda-feira": 1,âŠ
    "TerÃ§a-feira": 2,âŠ
    "Quarta-feira": 3,âŠ
    "Quinta-feira": 4,âŠ
    "Sexta-feira": 5,âŠ
     "SÃ¡bado": 6âŠ
  };âŠ
  if (typeof diaString === "string") {âŠ
    return dias[diaString] || null;âŠ
  }âŠ
  // Se for nÃºmero, retorna nomeâŠ
  for (const key in dias) {âŠ
    if (dias[key] === diaString) return key;âŠ
  }âŠ
  return null;âŠ
}âŠ
âŠ
async function mostrarPratosParaCliente(diasSelecionados) {âŠ
  if (!diasSelecionados || !diasSelecionados.length) {âŠ
    alert('Selecione pelo menos um dia da semana!');âŠ
    return;âŠ
  }âŠ
âŠ
  const response = await fetch('https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec', {âŠ
    method: 'POST',âŠ
    headers: { 'Content-Type': 'application/json' },âŠ
    body: JSON.stringify({ modo: 'filtrar', dias: diasSelecionados })âŠ
  });âŠ
âŠ
  const pratos = await response.json();âŠ
âŠ
  const container = document.getElementById('containerPratos');âŠ
  container.style.display = 'block';âŠ
  container.innerHTML = '';âŠ
âŠ
  if (!pratos.length) {âŠ
    container.innerHTML = '<p>Nenhum prato encontrado para o(s) dia(s) selecionado(s).</p>';âŠ
    return;âŠ
  }âŠ
âŠ
  pratos.forEach(prato => {âŠ
    const div = document.createElement('div');âŠ
    div.innerHTML = `âŠ
      <h3>${prato.nome}</h3>âŠ
      <img src="${prato.imagem}" alt="${prato.nome}" width="100">âŠ
    `;âŠ
    container.appendChild(div);âŠ
  });âŠ
}âŠ
âŠ
function voltarMenu() {âŠ
  // Ocultar botÃµes de reserva ao voltar para o menu inicialâŠ
  var botoesReserva = document.getElementById('botoesReserva');âŠ
  if (botoesReserva) botoesReserva.style.display = 'none';âŠ
âŠ
  // Ocultar todas as seÃ§ÃµesâŠ
  var todosPratos = document.getElementById('todosPratos');âŠ
  if (todosPratos) todosPratos.style.display = 'none';âŠ
âŠ
  var opcoesAdmin = document.getElementById('opcoesAdmin');âŠ
  if (opcoesAdmin) opcoesAdmin.style.display = 'none';âŠ
âŠ
  var editor = document.getElementById('editor');âŠ
  if (editor) editor.style.display = 'none';âŠ
âŠ
  var login = document.getElementById('login');âŠ
  if (login) login.style.display = 'none';âŠ
âŠ
  var prato = document.getElementById('prato');âŠ
  if (prato) prato.style.display = 'none';âŠ
âŠ
  // Mostrar a tela inicial (formulÃ¡rio principal)âŠ
  var formulario = document.querySelector(".formulario");âŠ
  if (formulario) formulario.style.display = 'block';âŠ
âŠ
  var titulo = document.getElementById('titulo');âŠ
  if (titulo) titulo.style.display = 'block';âŠ
âŠ
  var btnMenu = document.getElementById('btnMenu');âŠ
  if (btnMenu) btnMenu.style.display = 'block';âŠ
âŠ
  document.querySelectorAll('#diaSemanaCliente input[type="checkbox"]').forEach(cb => cb.checked = false);âŠ
}âŠ
âŠ
function pratosFiltradosCallback(pratos) {âŠ
  const gridContainer = document.getElementById('grid-container');âŠ
  if (!Array.isArray(pratos) || pratos.length === 0) {âŠ
    gridContainer.innerHTML = `<p class="text-center col-span-2 text-red-600">Nenhum prato encontrado para os dias selecionados.</p>`;âŠ
    return;âŠ
  }âŠ
  pratos.forEach(prato => {âŠ
    const card = document.createElement('div');âŠ
    card.className = 'p-4 bg-white rounded-lg shadow-md';âŠ
âŠ
    const img = document.createElement('img');âŠ
    img.src = prato.imagem;âŠ
    img.alt = prato.nome;âŠ
    img.className = 'w-full h-48 object-cover rounded-md mb-2';âŠ
âŠ
    const nome = document.createElement('h2');âŠ
    nome.textContent = prato.nome;âŠ
    nome.className = 'text-lg font-bold text-center';âŠ
âŠ
    card.appendChild(img);âŠ
    card.appendChild(nome);âŠ
    gridContainer.appendChild(card);âŠ
  });âŠ
}âŠ
âŠ
function verPratosPublicos() {âŠ
  const script = document.createElement('script');âŠ
  script.src = 'https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec?modo=pratos&callback=renderizarPratosPublicos';âŠ
  document.body.appendChild(script);âŠ
}âŠ
âŠ
function renderizarPratosPublicos(data) {âŠ
  const container = document.getElementById("grid-container");âŠ
  container.style.display = "grid";âŠ
  container.innerHTML = "";âŠ
âŠ
  const arrayPratos = [];âŠ
  for (const dia in data) {âŠ
    data[dia].forEach(prato => {âŠ
      arrayPratos.push({âŠ
        nome: prato.prato,âŠ
        imagem: prato.imagem,âŠ
        diaSemana: converterDia(dia) // Aqui jÃ¡ vem como string ("Segunda-feira")âŠ
      });âŠ
    });âŠ
  }âŠ
âŠ
  if (arrayPratos.length === 0) {âŠ
    container.textContent = 'Nenhum prato disponÃ­vel.';âŠ
    return;âŠ
  }âŠ
âŠ
  arrayPratos.forEach(prato => {âŠ
    const imagemUrl = (prato.imagem && prato.imagem.startsWith("http"))âŠ
      ? prato.imagemâŠ
      : `https://dummyimage.com/150x150/cccccc/000000&text=${encodeURIComponent(prato.nome || 'Sem imagem')}`;âŠ
âŠ
    const divPrato = document.createElement('div');âŠ
    divPrato.className = 'prato-publico';âŠ
    divPrato.innerHTML = `âŠ
      <h4>${prato.nome}</h4>âŠ
      <p>Dia: ${prato.diaSemana}</p>âŠ
      <img src="${imagemUrl}" alt="Imagem do prato ${prato.nome}" style="max-width:150px; border-radius: 8px;">âŠ
    `;âŠ
    divPrato.onclick = () => {âŠ
      mostrarVisualizacaoPrato(prato);âŠ
    };âŠ
    container.appendChild(divPrato);âŠ
  });âŠ
}âŠ
âŠ
âŠ
function salvarPratosSelecionados(pratosSelecionadosArr) {âŠ
  const nome = document.getElementById('nome').value.trim();âŠ
  if (!nome) {âŠ
    alert('Por favor, preencha seu nome antes de salvar a reserva.');âŠ
    return;âŠ
  }âŠ
âŠ
  let pratosSelecionados = pratosSelecionadosArr;âŠ
  if (!pratosSelecionados || !pratosSelecionados.length) {âŠ
    pratosSelecionados = [];âŠ
    document.querySelectorAll('.prato-item.selected').forEach(item => {âŠ
      const nomePrato = item.querySelector('p').textContent;âŠ
      const dia = item.dataset.diaSemana || '';âŠ
      pratosSelecionados.push({ nome: nomePrato, dia });âŠ
    });âŠ
  }âŠ
âŠ
  if (!pratosSelecionados.length) {âŠ
    alert('Selecione ao menos um prato para reservar.');âŠ
    return;âŠ
  }âŠ
âŠ
  // Envia cada reserva individualmenteâŠ
  Promise.all(pratosSelecionados.map(p => {âŠ
    const dados = {âŠ
      nome: nome,âŠ
      prato: p.nome,âŠ
      diaSemana: p.dia,âŠ
      modo: "reserva"âŠ
    };âŠ
   return fetch("proxy.php", {âŠ
        method: "POST",âŠ
        headers: {âŠ
          "Content-Type": "application/json"âŠ
        },âŠ
        body: JSON.stringify(dados)âŠ
      })âŠ
      .then(response => {âŠ
        if (!response.ok) throw new Error("Network error");âŠ
        return response.json();âŠ
      })âŠ
      .then(data => {âŠ
        if (!data.sucesso) throw new Error("Backend error");âŠ
      });âŠ
  })).then(() => {âŠ
    alert('Reserva enviada com sucesso!');âŠ
    document.getElementById('telaPratos').style.display = 'none';âŠ
    document.querySelector('.formulario').style.display = 'block';âŠ
    document.getElementById('botoesReserva').style.display = 'none';âŠ
  }).catch(() => {âŠ
    alert('Erro ao enviar reserva.');âŠ
  });âŠ
}âŠ
function getDiaSemanaTexto(numero) {âŠ
  const dias = {âŠ
    1: 'Segunda-feira',âŠ
    2: 'TerÃ§a-feira',âŠ
    3: 'Quarta-feira',âŠ
    4: 'Quinta-feira',âŠ
    5: 'Sexta-feira',âŠ
    6: 'SÃ¡bado'âŠ
  };âŠ
  return dias[numero] || 'Dia invÃ¡lido';âŠ
}âŠ
// No frontendâŠ
function enviarReservaParaSheets(nomeCliente, pratosSelecionados) {âŠ
  if (!nomeCliente || !pratosSelecionados || !pratosSelecionados.length) {âŠ
    alert('Preencha o nome e selecione pelo menos um prato.');âŠ
    return;âŠ
  }âŠ
âŠ
  Promise.all(pratosSelecionados.map(pratoObj => {âŠ
const dados = {âŠ
    nome: nomeCliente,âŠ
    prato: pratoObj.nome,âŠ
    diaSemana: pratoObj.dia || pratoObj.diaSemana,âŠ
    modo: "reserva"âŠ
  };âŠ
  return fetch(scriptURL, {âŠ
    method: "POST",âŠ
    headers: { "Content-Type": "application/json" },âŠ
    body: JSON.stringify(dados)âŠ
  })âŠ
    .then(response => {âŠ
      if (!response.ok) throw new Error("Network error");âŠ
      return response.json();âŠ
    })âŠ
    .then(data => {âŠ
      if (!data.sucesso) throw new Error("Backend error");âŠ
    });âŠ
  }))âŠ
  .then(() => {âŠ
    alert('Reserva enviada com sucesso!');âŠ
    // Esconde a tela de pratos e mostra o formulÃ¡rio principal, se existiremâŠ
    const telaPratos = document.getElementById('telaPratos');âŠ
    if (telaPratos) telaPratos.style.display = 'none';âŠ
    const formulario = document.querySelector('.formulario');âŠ
    if (formulario) formulario.style.display = 'block';âŠ
    const botoesReserva = document.getElementById('botoesReserva');âŠ
    if (botoesReserva) botoesReserva.style.display = 'none';âŠ
   })âŠ
  .catch(() => {âŠâŠ
     alert('Erro ao enviar reserva.');âŠ
âŠâŠ
  });âŠâŠ
}âŠâŠ
âŠ
âŠ
âŠ
function handleResponse(data) {âŠ
    console.log("Dados recebidos:", data);âŠ
    // Atualiza UI com os pratosâŠ
  }âŠ
âŠ
  const script = document.createElement('script');âŠ
  script.src = 'https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec?modo=ler&callback=handleResponse';âŠ
  document.body.appendChild(script);âŠ
âŠ
  function mostrarLogin() {âŠ
    document.getElementById('titulo').style.display = 'none';âŠ
    document.getElementById('btnMenu').style.display = 'none';âŠ
    document.getElementById('login').style.display = 'block';âŠ
    document.querySelector(".formulario").style.display = 'none';âŠ
    document.getElementById('prato').style.display = 'none';âŠ
    âŠ
    âŠ
  }âŠ
function exibirPratos() {âŠ
  const container = document.getElementById('verPratosContainer');âŠ
  container.innerHTML = '';âŠ
âŠ
  if (!Array.isArray(pratosGlobais) || pratosGlobais.length === 0) {âŠ
    container.innerHTML = '';âŠ
    return;âŠ
  }âŠ
âŠ
  pratosGlobais.forEach(prato => {âŠ
    const div = document.createElement('div');âŠ
    div.className = 'prato-publico';âŠ
    div.innerHTML = `âŠ
      <h4>${prato.nome}</h4>âŠ
      <p>Dia: ${prato.diaSemana}</p>âŠ
      <img src="${prato.imagem}" alt="${prato.nome}" style="max-width: 150px; border-radius: 8px;">âŠ
    `;âŠ
    container.appendChild(div);âŠ
  });âŠ
}âŠ
  function login() {âŠ
    const user = document.getElementById('user').value.trim();âŠ
    const pass = document.getElementById('pass').value;âŠ
âŠ
    if (user === "admin" && pass === "Admin2025") {âŠ
      document.getElementById('login').style.display = 'none';âŠ
      document.getElementById('opcoesAdmin').style.display = 'block';âŠ
      alert("Seja bem vindo admin.");âŠ
    }âŠ
  }âŠ
function editarPratos() {âŠ
    document.getElementById('opcoesAdmin').style.display = 'none';âŠ
    document.getElementById('editor').style.display = 'block';âŠ
  }âŠ
 âŠ
function guardarPrato() {âŠ
  console.log("FunÃ§Ã£o guardarPrato chamada!");âŠ
  const fileInput = document.querySelector('.novaImagem');âŠ
  const nomeInput = document.querySelector('.novoNome');âŠ
  const diaSelect = document.querySelector('#diaSemanaAdmin');âŠ
  if (!fileInput || !fileInput.files[0] || !nomeInput || !nomeInput.value.trim() || !diaSelect || !diaSelect.value) {âŠ
    alert("Preencha todos os campos antes de guardar!");âŠ
    return;âŠ
  }âŠ
âŠ
  // Redimensiona/comprime a imagem antes de enviarâŠ
  redimensionarImagem(fileInput.files[0], 600, 600, function(base64Image) {âŠ
    const nomePrato = nomeInput.value.trim();âŠ
    const diaSemanaNumero = diaSelect.value;âŠ
    const dias = ["Segunda-feira", "TerÃ§a-feira", "Quarta-feira", "Quinta-feira", "Sexta-feira", "SÃ¡bado"];âŠ
    const diaSemanaTexto = dias[Number(diaSemanaNumero) - 1];âŠ
    console.log("Enviando prato:", nomePrato, diaSemanaTexto);âŠ
âŠ
    enviarNovoPratoParaSheets({âŠ
      nome: nomePrato,âŠ
      diaSemana: diaSemanaTexto,âŠ
      imagem: base64ImageâŠ
    });âŠ
  });âŠ
}âŠ
âŠ
function enviarNovoPratoParaSheets(pratoObj) {âŠ
  console.log("Enviando diretamente para Google Apps Script:", pratoObj);âŠ
  fetch("https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec", {âŠ
    method: "POST",âŠ
    headers: { "Content-Type": "application/json" },âŠ
    body: JSON.stringify({âŠ
      prato: pratoObj.nome,âŠ
      diaSemana: pratoObj.diaSemana,âŠ
      imagem: pratoObj.imagem,âŠ
      modo: "novoPrato"âŠ
    })âŠ
  })âŠ
  .then(response => {âŠ
    if (!response.ok) throw new Error("Network error");âŠ
    return response.json();âŠ
  })âŠ
  .then(data => {âŠ
    if (data.sucesso) {âŠ
      alert("Prato enviado!");âŠ
    } else {âŠ
      alert("Erro ao enviar prato.");âŠ
    }âŠ
  })âŠ
  .catch(() => {âŠ
    alert("Erro ao enviar prato.");âŠ
  });âŠ
}âŠ
âŠ
function redimensionarImagem(file, maxWidth, maxHeight, callback) {âŠ
  const reader = new FileReader();âŠ
  reader.onload = function(event) {âŠ
    const img = new Image();âŠ
    img.onload = function() {âŠ
      let width = img.width;âŠ
      let height = img.height;âŠ
âŠ
      // Calcula nova largura/altura mantendo proporÃ§Ã£oâŠ
      if (width > maxWidth) {âŠ
        height *= maxWidth / width;âŠ
        width = maxWidth;âŠ
      }âŠ
      if (height > maxHeight) {âŠ
        width *= maxHeight / height;âŠ
        height = maxHeight;âŠ
      }âŠ
âŠ
      // Redimensiona num canvasâŠ
      const canvas = document.createElement('canvas');âŠ
      canvas.width = width;âŠ
      canvas.height = height;âŠ
      const ctx = canvas.getContext('2d');âŠ
      ctx.drawImage(img, 0, 0, width, height);âŠ
âŠ
      // Exporta para base64 (JPEG, qualidade 0.7)âŠ
      const dataUrl = canvas.toDataURL('image/jpeg', 0.7);âŠ
      callback(dataUrl);âŠ
    };âŠ
    img.src = event.target.result;âŠ
  };âŠ
  reader.readAsDataURL(file);âŠ
}âŠ
âŠ
function desativarPrato(legenda) {âŠ
  const dados = {âŠ
    legenda: legenda,âŠ
    estado: 'desativado', // ou outro estado que vocÃª queira atribuirâŠ
  };âŠ
âŠ
  fetch(scriptURL + "?modo=atualizar", {âŠ
    method: "POST",âŠ
    headers: {âŠ
      "Content-Type": "application/json",âŠ
    },âŠ
    body: JSON.stringify(dados),âŠ
  })âŠ
    .then((res) => res.json())âŠ
    .then(() => {âŠ
      alert(`O prato ${legenda} foi desativado com sucesso.`);âŠ
      // Aqui vocÃª pode tambÃ©m atualizar a interface para refletir a desativaÃ§Ã£oâŠ
    })âŠ
    .catch((err) => {âŠ
      alert("Erro ao desativar o prato.");âŠ
      console.error(err);âŠ
    });âŠ
}âŠ
fetch("https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec?modo=ler")âŠ
  .then(response => response.json())âŠ
  .then(data => {âŠ
    if (data && Array.isArray(data)) {âŠ
      mostrarPratos(data);âŠ
    } else {âŠ
      throw new Error("Resposta invÃ¡lida");âŠ
    }âŠ
  })âŠ
  .catch(error => {âŠ
    console.error("Erro ao carregar o prato:", error);âŠ
    //alert("Erro ao carregar o prato. Verifique a conexÃ£o ou tente novamente.");âŠ
  });âŠ
âŠ
âŠ
  function cancelar() {âŠ
    document.getElementById('nome').value = '';âŠ
    document.getElementById('data').value = '';âŠ
  }âŠ
function adicionarEntrada() {âŠ
  const container = document.getElementById("listaEditor");âŠ
âŠ
  const novaEntrada = document.createElement("div");âŠ
  novaEntrada.className = "entrada-prato";âŠ
  novaEntrada.innerHTML = `âŠ
    <label for="novaImagem">Imagem do prato:</label>âŠ
    <input type="file" class="novaImagem" accept="image/*">âŠ
âŠ
    <label for="novoNome">Nome do prato:</label>âŠ
    <input type="text" class="novoNome" placeholder="Nome do prato">âŠ
âŠ
    <label for="diaSemana">Escolha o dia:</label>âŠ
    <select class="diaSemana styled-select">âŠ
      <option value="1">Segunda-feira</option>âŠ
      <option value="2">TerÃ§a-feira</option>âŠ
      <option value="3">Quarta-feira</option>âŠ
      <option value="4">Quinta-feira</option>âŠ
      <option value="5">Sexta-feira</option>âŠ
       <option value="6">SÃ¡bado</option>âŠ
    </select>âŠ
  `;âŠ
  container.appendChild(novaEntrada);âŠ
}âŠ
function mostrarPrato() {âŠ
  const nome = document.getElementById('nome').value.trim();âŠ
  const diaSemana = document.getElementById('diaSemana').value;âŠ
âŠ
  if (!nome || !diaSemana) {âŠ
    alert("Por favor preencha todos os campos.");âŠ
    return;âŠ
  }âŠ
âŠ
  // Obter os pratos do localStorageâŠ
  const pratos = JSON.parse(localStorage.getItem('pratos')) || [];âŠ
âŠ
  // Buscar o prato correspondente ao dia da semanaâŠ
  const prato = pratos.find(p => parseInt(p.diaSemana) === parseInt(diaSemana));âŠ
âŠ
  if (prato) {âŠ
    // Exibir o prato na telaâŠ
    document.getElementById('imagem').src = prato.imagem;âŠ
    document.getElementById('nomePrato').textContent = prato.nome;âŠ
    document.getElementById('prato').style.display = 'block';âŠ
    document.querySelector('.formulario').style.display = 'none';âŠ
  } else {âŠ
    alert("NÃ£o hÃ¡ prato registado para esse dia.");âŠ
  }âŠ
}âŠ
âŠ
function carregarPrato(diaSemana) {âŠ
  fetch(`${scriptURL}?modo=ler`)âŠ
    .then(response => response.json())âŠ
    .then(data => {âŠ
      const pratoDoDia = data.find(p => parseInt(p.dia) === diaSemana);âŠ
      if (pratoDoDia) {âŠ
        document.getElementById('imagem').src = pratoDoDia.imagem;âŠ
        document.getElementById('nomePrato').innerText = pratoDoDia.nome;âŠ
        document.getElementById('prato').style.display = 'block';âŠ
      } else {âŠ
        alert("Ainda nÃ£o hÃ¡ prato definido para esse dia.");âŠ
      }âŠ
    })âŠ
    .catch(err => {âŠ
      console.error("Erro ao carregar o prato:", err);âŠ
      alert("Erro ao carregar o prato.");âŠ
    });âŠ
} //   âŠ
function handleImageUpload(event) {âŠ
  const file = event.target.files[0];âŠ
  const reader = new FileReader();âŠ
  âŠ
  reader.onloadend = function () {âŠ
   const base64Image = reader.result.split(',')[1]; // Pega apenas a parte da imagem em base64âŠ
    const name = document.getElementById('dishName').value;âŠ
    const day = document.getElementById('daySelector').value; // Dia selecionadoâŠ
    saveToSheet(name, base64Image, day);âŠ
  };âŠ
âŠ
  reader.readAsDataURL(file); // Converte a imagem para base64âŠ
}âŠ
âŠ
function verTodosOsPratos() {âŠ
  document.getElementById('todosPratos').style.display = 'block';âŠ
  document.getElementById('opcoesAdmin').style.display = 'none';âŠ
âŠ
  const diaSelecionado = document.getElementById('diaSemanaFiltro').value;âŠ
âŠ
  // Define o callback ANTES de adicionar o script!âŠ
 âŠ
 window.receberTodosPratosAdmin = function(data) {âŠ
    const pratos = [];âŠ
    const diaFiltroNum = Number(diaSelecionado);âŠ
    for (const dia in data) {âŠ
      data[dia].forEach(prato => {âŠ
        const diaPratoTexto = typeof (prato.diaSemana) === "number"âŠ
          ? getDiaSemanaTexto(prato.diaSemana)âŠ
          : (prato.diaSemana || dia);âŠ
        if (diaPratoTexto === getDiaSemanaTexto(Number(diaSelecionado))) {âŠ
          pratos.push({âŠ
            nome: prato.nome || prato.prato, // <-- Corrigido aqui!âŠ
            imagem: prato.imagem,âŠ
            diaSemana: diaPratoTexto,âŠ
            oculto: prato.oculto === "TRUE" || prato.oculto === "ocultado"âŠ
          });âŠ
        }âŠ
      });âŠ
    }âŠ
âŠ
    const lista = document.getElementById('pratos-list');âŠ
    lista.innerHTML = '';âŠ
    if (pratos.length === 0) {âŠ
      lista.innerHTML = '<p>NÃ£o hÃ¡ pratos registrados para este dia.</p>';âŠ
      return;âŠ
    }âŠ
âŠ
    pratos.forEach(prato => {âŠ
      const li = document.createElement('li');âŠ
      li.style.position = 'relative';âŠ
      const estaOculto = prato.oculto === true;âŠ
      if (estaOculto) li.style.opacity = '0.5';âŠ
      li.innerHTML = `âŠ
        <img src="${prato.imagem}" alt="Imagem do Prato" style="width: 100px; border-radius: 10px; margin-bottom: 10px;">âŠ
        <span>${prato.nome} (${getDiaSemanaTexto(prato.diaSemana)})</span>âŠ
        <span style="color:red; font-size:14px; display:${estaOculto ? 'block' : 'none'};">Prato nÃ£o disponÃ­vel</span>âŠ
      `;âŠ
âŠ
      const btnOcultar = document.createElement('button');âŠ
      btnOcultar.textContent = estaOculto ? 'Ativar' : 'Ocultar';âŠ
âŠ
      btnOcultar.onclick = () => {âŠ
         const novoEstado = estaOculto ? "ativarPrato" : "ocultarPrato";âŠ
fetch("https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec", {âŠ
  method: "POST",âŠ
  headers: { "Content-Type": "application/json" },âŠ
  body: JSON.stringify({âŠ
    modo: novoEstado,âŠ
    prato: prato.nome,âŠ
    diaSemana: prato.diaSemanaâŠ
  })âŠ
})âŠ
.then(response => {âŠ
  if (!response.ok) throw new Error("Network error");âŠ
  return response.json();âŠ
})âŠ
.then(data => {âŠ
  if (data.sucesso) {âŠ
    verTodosOsPratos();âŠ
  } else {âŠ
    alert("Erro ao atualizar o estado do prato.");âŠ
  }âŠ
})âŠ
.catch(() => {âŠ
  alert("Erro ao atualizar o prato.");âŠ
});âŠ
      };âŠ
âŠ
      li.appendChild(btnOcultar);âŠ
      lista.appendChild(li);âŠ
    });âŠ
âŠ
    delete window.receberTodosPratosAdmin;âŠ
  };âŠ
âŠ
  // SÃ³ depois de definir o callback, adiciona o script!âŠ
  const script = document.createElement('script');âŠ
  script.src = 'https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec?modo=pratos&callback=receberTodosPratosAdmin';âŠ
  document.body.appendChild(script);âŠ
}âŠ
âŠ
âŠ
function limparPratoSheets(prato) {âŠ
  const nomePrato = String(prato.nome).trim();âŠ
  const diaSemanaTexto = getDiaSemanaTexto(prato.diaSemana);âŠ
  const dados = {âŠ
    modo: "limparPrato",âŠ
    prato: nomePrato,âŠ
    diaSemana: diaSemanaTextoâŠ
  };âŠ
  fetch("https://script.google.com/macros/s/AKfycbysVvVdkCHTq772jeLDOIqiwolmKH1AjlzCH-DGFFGIx3bwzRA0smuyeNvTNn099LLW/exec", {âŠ
    method: "POST",âŠ
    headers: { "Content-Type": "application/json" },âŠ
    body: JSON.stringify(dados)âŠ
  })âŠ
  .then(response => {âŠ
    if (response.ok) {âŠ
      alert('Prato ocultado e dados limpos com sucesso (atualize a lista para ver mudanÃ§as).');âŠ
    } else {âŠ
      throw new Error('Network error');âŠ
    }âŠ
  })âŠ
  .catch(() => {âŠ
    alert('Erro ao ocultar prato.');âŠ
  });âŠ
}âŠ
âŠ
function voltar() {âŠ
      window.history.back(); // Volta para a pÃ¡gina anteriorâŠ
    }âŠ
âŠ
function mostrarPratoDaUrl() {âŠ
  const urlParams = new URLSearchParams(window.location.search);âŠ
  const prato = {âŠ
    nome: urlParams.get("nome"),âŠ
    dia: urlParams.get("dia"),âŠ
    imagem: urlParams.get("imagem")âŠ
  };âŠ
  if (prato.dia && prato.imagem) {âŠ
    const container = document.getElementById(prato.dia);âŠ
    if (container) {âŠ
      const img = document.createElement('img');âŠ
      img.src = prato.imagem;âŠ
      img.style.width = '150px';âŠ
      img.style.margin = '10px';âŠ
      img.alt = `Prato de ${prato.dia}`;âŠ
      container.appendChild(img);âŠ
    }âŠ
  }âŠ
}âŠ
âŠ
</script>âŠ
</body>âŠ
</html>âŠ
